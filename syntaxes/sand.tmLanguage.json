{
    "$schema":"https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name":"Sand",
    "scopeName":"source.sand",
    "patterns":[
        {
            "include":"#comments"
        },
        {
            "include":"#strings"
        },
        {
            "include":"#keywords"
        },
        {
            "include":"#operators"
        },
        {
            "include":"#numbers"
        },
        {
            "include":"#support"
        },
        {
            "include":"#variables"
		}
    ],
    "repository":{
        "variables":{
            "patterns":[
                {
                    "name":"meta.function.declaration.sand",
                    "patterns":[
                        {
                            "match":"\\b(fn)\\s+([A-Z][a-zA-Z0-9]*)\\b",
                            "captures":{
                                "1":{
                                    "name":"storage.type.function.sand"
                                },
                                "2":{
                                    "name":"entity.name.type.sand"
                                }
                            }
                        },
                        {
                            "match":"\\b(fn)\\s+([_a-zA-Z][_a-zA-Z0-9]*)\\b",
                            "captures":{
                                "1":{
                                    "name":"storage.type.function.sand"
                                },
                                "2":{
                                    "name":"entity.name.function.sand"
                                }
                            }
                        },
                        {
                            "begin":"\\b(fn)\\s+@\"",
                            "end":"\"",
                            "name":"entity.name.function.sand",
                            "beginCaptures":{
                                "1":{
                                    "name":"storage.type.function.sand"
                                }
                            },
                            "patterns":[
                                {
                                    "include":"#stringcontent"
                                }
                            ]
                        },
                        {
                            "name":"keyword.default.sand",
                            "match":"\\b(const|var|fn)\\b"
                        }
                    ]
                },
                {
                    "name":"meta.function.call.sand",
                    "patterns":[
                        {
                            "match":"([A-Z][a-zA-Z0-9]*)(?=\\s*\\()",
                            "name":"entity.name.type.sand"
                        },
                        {
                            "match":"([_a-zA-Z][_a-zA-Z0-9]*)(?=\\s*\\()",
                            "name":"entity.name.function.sand"
                        }
                    ]
                },
                {
                    "name":"meta.variable.sand",
                    "patterns":[
                        {
                            "match":"\\b[_A-Z][_A-Z0-9]+\\b",
                            "name":"variable.constant.sand"
                        },
                        {
                            "match":"\\b[_a-zA-Z][_a-zA-Z0-9]*_t\\b",
                            "name":"entity.name.type.sand"
                        },
                        {
                            "match":"\\b[A-Z][a-zA-Z0-9]*\\b",
                            "name":"entity.name.type.sand"
                        },
                        {
                            "match":"\\b[_a-zA-Z][_a-zA-Z0-9]*\\b",
                            "name":"variable.sand"
                        },
                        {
                            "begin":"@\"",
                            "end":"\"",
                            "name":"variable.sand",
                            "patterns":[
                                {
                                    "include":"#stringcontent"
                                }
                            ]
                        }
                    ]
                }
            ]
        },
        "keywords":{
            "patterns":[
                {
                    "match":"(\\binline\\b)?\\s*\\b(while|for)\\b",
                    "name":"keyword.control.repeat.sand"
                },
                {
                    "name":"keyword.storage.sand",
                    "match":"\\b(export)\\b"
                },
                {
                    "name":"keyword.structure.sand",
                    "match":"\\b(struct|enum)\\b"
                },
                {
                    "name":"keyword.control.flow.sand",
                    "match":"\\b(break|return|continue|defer|errdefer)\\b"
                },
                {
                    "name":"keyword.control.async.sand",
                    "match":"\\b(await|resume|suspend|async|nosuspend)\\b"
                },
                {
                    "name":"keyword.control.trycatch.sand",
                    "match":"\\b(try|catch)\\b"
                },
                {
                    "name":"keyword.control.conditional.sand",
                    "match":"\\b(if|else|switch|orelse)\\b"
                },
                {
                    "name":"keyword.constant.default.sand",
                    "match":"\\b(null|undefined)\\b"
                },
                {
                    "name":"keyword.constant.bool.sand",
                    "match":"\\b(true|false)\\b"
                },
                {
                    "match":"[\\s\\(\\[\\{](\\.[_a-zA-Z][_a-zA-Z0-9]*)(?!\\s*=[^>])(?![_a-zA-Z0-9])",
                    "captures":{
                        "1":{
                            "name":"variable.other.enummember.sand"
                        }
                    }
                },
                {
                    "name":"keyword.default.sand",
                    "match":"\\b(import|test|and|or)\\b"
				},
                {
                    "name":"meta.error-set.sand",
                    "patterns":[
                        {
                            "begin":"\\b(error)\\b\\s*{",
                            "end":"}",
                            "beginCaptures":{
                                "1":{
                                    "name":"keyword.type.sand"
                                }
                            },
                            "patterns":[
                                {
                                    "match":"\\b[_a-zA-Z][_a-zA-Z0-9]*\\b",
                                    "name":"variable.constant.error.sand"
                                },
                                {
                                    "include":"$self"
                                }
                            ]
                        },
                        {
                            "begin":"\\b(error)\\b",
                            "end":"\\b([_a-zA-Z][_a-zA-Z0-9]*)\\b",
                            "beginCaptures":{
                                "1":{
                                    "name":"keyword.type.sand"
                                }
                            },
                            "endCaptures":{
                                "1":{
                                    "name":"variable.constant.error.sand"
                                }
                            },
                            "patterns":[
                                {
                                    "include":"$self"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name":"keyword.type.sand",
                    "match":"\\b(bool|void|noreturn|type|error|anyerror|anyframe|anytype)\\b"
                },
                {
                    "name":"keyword.type.integer.sand",
                    "match":"\\b(f16|f32|f64|f128|u\\d+|i\\d+|isize|usize|comptime_int|comptime_float)\\b"
                },
                {
                    "name":"keyword.type.c.sand",
                    "match":"\\b(c_short|c_ushort|c_int|c_uint|c_long|c_ulong|c_longlong|c_ulonglong|c_longdouble|c_void)\\b"
                }
            ]
        },
        "operators":{
            "patterns":[
                {
                    "name":"keyword.operator.c-pointer.sand",
                    "match":"\\[*c\\]"
                },
                {
                    "name":"keyword.operator.comparison.sand",
                    "match":"(\\b(and|or)\\b)|(==|!=)"
                },
                {
                    "name":"keyword.operator.arithmetic.sand",
                    "match":"(-%?|\\+%?|\\*%?|/|%)=?"
                },
                {
                    "name":"keyword.operator.bitwise.sand",
                    "match":"(<<%?|>>|!|&|\\^|\\|)=?"
                },
                {
                    "name":"keyword.operator.special.sand",
                    "match":"(==|\\+\\+|\\*\\*|->)"
                }
            ]
        },
        "comments":{
            "patterns":[
                {
                    "name":"comment.line.documentation.sand",
                    "begin":"//[!/](?=[^/])",
                    "end":"$",
                    "patterns":[
                        {
                            "include":"#commentContents"
                        }
                    ]
                },
                {
                    "name":"comment.line.double-slash.sand",
                    "begin":"//",
                    "end":"$",
                    "patterns":[
                        {
                            "include":"#commentContents"
                        }
                    ]
                }
            ]
        },
        "commentContents":{
            "patterns":[
                {
                    "match":"\\b(TODO|!|NOTE|DEBUG)\\b:?",
                    "name":"keyword.todo.sand"
                }
            ]
        },
        "strings":{
            "patterns":[
                {
                    "name":"string.quoted.double.sand",
                    "begin":"\"",
                    "end":"\"",
                    "patterns":[
                        {
                            "include":"#stringcontent"
                        }
                    ]
                },
                {
                    "name":"string.multiline.sand",
                    "begin":"\\\\\\\\",
                    "end":"$"
                },
                {
                    "name":"string.quoted.single.sand",
                    "match":"'([^'\\\\]|\\\\(x\\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.))'"
                }
            ]
        },
        "stringcontent":{
            "patterns":[
                {
                    "name":"constant.character.escape.sand",
                    "match":"\\\\([nrt'\"\\\\]|(x[0-9a-fA-F]{2})|(u\\{[0-9a-fA-F]+\\}))"
                },
                {
                    "name":"invalid.illegal.unrecognized-string-escape.sand",
                    "match":"\\\\."
                }
            ]
        },
        "numbers":{
            "patterns":[
                {
                    "name":"constant.numeric.float.sand",
                    "match":"\\b[0-9][0-9_]*(\\.[0-9][0-9_]*)?([eE][+-]?[0-9_]+)?\\b"
                },
                {
                    "name":"constant.numeric.decimal.sand",
                    "match":"\\b[0-9][0-9_]*\\b"
                },
                {
                    "name":"constant.numeric.hexadecimal.sand",
                    "match":"\\b0x[a-fA-F0-9_]+\\b"
                },
                {
                    "name":"constant.numeric.octal.sand",
                    "match":"\\b0o[0-7_]+\\b"
                },
                {
                    "name":"constant.numeric.binary.sand",
                    "match":"\\b0b[01_]+\\b"
                }
            ]
        },
        "support":{
            "patterns":[
                {
                    "comment":"Built-in functions",
                    "name":"support.function.builtin.sand",
                    "match":"@[_a-zA-Z][_a-zA-Z0-9]*"
                }
            ]
        }
    }
}